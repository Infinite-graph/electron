From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: clavin <cwatford@slack-corp.com>
Date: Tue, 21 Dec 2021 10:17:37 -0700
Subject: build: disable PartitionAlloc on mac

PartitionAlloc on mac requires some restructuring in Electron as well as considerations about the mas build. In the mean time, disabling it should be fine.

This patch can be removed once the mac app runs safely with PartitionAlloc on (i.e. removing dependency to //base in the main app) & the situation with mas is figured out.

diff --git a/base/allocator/allocator.gni b/base/allocator/allocator.gni
index 1a570331f8b5383437b1ff9ab069f5069dffe0a1..58c0f52d5cff2ec27e75095376cc68d968db69f2 100644
--- a/base/allocator/allocator.gni
+++ b/base/allocator/allocator.gni
@@ -18,7 +18,7 @@ _is_using_sanitizers = is_asan || is_hwasan || is_lsan || is_tsan || is_msan
 # - Windows: debug CRT is not compatible, see below.
 _disable_partition_alloc = is_component_build || (is_win && is_debug)
 _is_partition_alloc_platform =
-    is_android || is_win || is_mac || is_linux || is_chromeos ||
+    is_android || is_win || is_linux || is_chromeos ||
     # TODO(crbug.com/1278780): Allow x64 once compatible with safe-stack.
     (is_fuchsia && target_cpu == "arm64")
 
